---
interface Props {
  slug: string;
  nameAr: string;
  nameTi?: string;
  specialty: string;
  bio: string;
  avatarUrl?: string;
  fatwaCount?: number;
  articleCount?: number;
  videoCount?: number;
}

const {
  slug,
  nameAr,
  nameTi,
  specialty,
  bio,
  avatarUrl,
  fatwaCount = 0,
  articleCount = 0,
  videoCount = 0
} = Astro.props;

const initials = nameAr.split(' ').map(n => n[0]).slice(0, 2).join('');
---

<a href={`/scholars/${slug}`} class="card block p-6 text-center group">
  <div class="mb-4">
    {avatarUrl ? (
      <img
        src={avatarUrl}
        alt={nameAr}
        class="w-24 h-24 rounded-full mx-auto object-cover border-4 border-cream group-hover:border-accent transition-colors"
      />
    ) : (
      <div class="w-24 h-24 rounded-full mx-auto bg-primary/10 flex items-center justify-center border-4 border-cream group-hover:border-accent transition-colors">
        <span class="text-2xl font-bold text-primary font-amiri">{initials}</span>
      </div>
    )}
  </div>

  <div class="bilingual-title mb-2 items-center">
    <h3 class="ar text-xl font-bold text-text-dark group-hover:text-primary transition-colors">
      {nameAr}
    </h3>
    {nameTi && <p class="ti text-sm text-text-light">{nameTi}</p>}
  </div>

  <p class="text-sm text-accent font-medium mb-3">{specialty}</p>

  <p class="text-sm text-text-light line-clamp-2 mb-4">{bio}</p>

  <div class="flex justify-center gap-4 pt-4 border-t border-cream-dark">
    <div class="text-center">
      <span class="block text-lg font-bold text-primary">{fatwaCount}</span>
      <span class="text-xs text-text-light">فتوى</span>
    </div>
    <div class="text-center">
      <span class="block text-lg font-bold text-primary">{articleCount}</span>
      <span class="text-xs text-text-light">مقال</span>
    </div>
    <div class="text-center">
      <span class="block text-lg font-bold text-primary">{videoCount}</span>
      <span class="text-xs text-text-light">درس</span>
    </div>
  </div>
</a>

<style>
  .font-amiri {
    font-family: var(--font-amiri);
  }
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
